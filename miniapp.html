<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adventure App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: url('https://media.discordapp.net/attachments/1349800672035475533/1377962570501066863/91ae8a950b924696.jpg?ex=683d8226&is=683c30a6&hm=778cc4e56437a460ad5373d6a3d5648e4b1af2058a46d9fd2d9258a68556df07&=&format=webp&width=1126&height=1126') no-repeat center center fixed;
            background-size: cover;
            color: #f0f0f0;
            min-height: 100vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            padding: 120px 16px 100px;
            position: relative;
        }

        body::before {
            content: "";
            position: fixed;
            inset: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.6), rgba(0,0,0,0.2));
            z-index: -1;
        }

        .header-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: url('https://cdn.discordapp.com/attachments/1349800672035475533/1377962570501066863/91ae8a950b924696.jpg?ex=683adf26&is=68398da6&hm=8eeede46db8fe6b6eb7923dc947b5dada91c3b2f11bd822067ab244a04099346') no-repeat center center fixed;
            background-size: cover;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
            padding: 12px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 100;
            height: 80px;
        }

        .header-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(16, 16, 16, 0.95);
            backdrop-filter: blur(12px);
            z-index: -1;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #f0f0f0;
            text-align: left;
            text-shadow: 0 0 8px #6C5DD3, 0 0 16px rgba(108, 93, 211, 0.6);
        }

        #subscriptionsSection {
            padding: 24px 16px 120px;
            overflow-y: auto;
            height: calc(100vh - 80px);
            -webkit-overflow-scrolling: touch;
        }

        .card {
            background: rgba(16, 16, 16, 0.85);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(108, 93, 211, 0.4), 0 0 15px rgba(108, 93, 211, 0.2);
            overflow: hidden;
            color: #f0f0f0;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            opacity: 0;
        }

        .card.reveal {
            animation: fadeInUp 0.6s ease both;
        }

        .card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(108, 93, 211, 0.8), 0 0 20px rgba(108, 93, 211, 0.4);
        }

        .card.scenario-card {
            width: 100%;
            max-width: 454px;
            min-height: 562px;
            margin: 16px auto;
        }

        .card.item-card, .card.currency-card {
            width: 100%;
            max-width: 238px;
            min-height: 290px;
            margin: 4px;
        }

        .card.currency-card-wide {
            grid-column: span 2;
            max-width: 492px;
            margin: 4px auto;
        }

        .card img {
            width: 100%;
            display: block;
            border-top-left-radius: 16px;
            border-top-right-radius: 16px;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .card img:hover {
            transform: scale(1.03);
        }

        .card.scenario-card img {
            height: 360px; /* Increased height for scenario card images */
        }

        .card.item-card img, .card.currency-card img {
            height: 145px;
        }

        .card-body {
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            flex-grow: 1; /* Ensure card-body takes remaining space */
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: #ffffff;
            text-shadow: 0 0 8px #6C5DD3;
            transition: text-shadow 0.3s ease, letter-spacing 0.3s ease;
        }

        .card-title:hover {
            text-shadow: 0 0 16px #8F6CED;
            letter-spacing: 0.5px;
        }

        .card-price {
            font-size: 16px;
            color: #6C5DD3;
            font-weight: 600;
            line-height: 1.4;
        }

        .card-actions {
            margin-top: auto; /* Move buttons to the bottom of the card */
            padding-top: 12px;
        }

        .btn {
            width: 100%;
            padding: 12px 16px;
            background: linear-gradient(135deg, #6C5DD3, #8F6CED);
            border: 2px solid #6C5DD3;
            border-radius: 20px;
            color: #ffffff;
            font-size: 16px;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.5s ease, box-shadow 0.3s ease, transform 0.2s ease;
            box-shadow: 0 0 12px rgba(108, 93, 211, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .card.item-card .btn {
            padding: 8px 24px; /* Adjusted padding for longer, less tall buttons */
            font-size: 14px; /* Reduced font size for item card buttons */
        }

        .btn:hover {
            background: linear-gradient(135deg, #5A4DC6, #7D5BE0);
            border: 2px solid #5A4DC6;
            box-shadow: 0 0 18px rgba(108, 93, 211, 0.9);
            transform: scale(1.02);
            border-radius: 20px;
        }

        #buySubscriptionBtn {
            border-radius: 24px;
        }

        .subscription-card {
            width: 100%;
            background: rgba(16, 16, 16, 0.85);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(108, 93, 211, 0.6);
            color: #f0f0f0;
            display: flex;
            flex-direction: column;
            transition: all 0.2s ease;
            padding: 12px 24px;
            cursor: pointer;
            margin: 8px 0;
            position: relative;
            opacity: 0;
        }

        .subscription-card.reveal {
            animation: fadeInUp 0.6s ease both;
        }

        .subscription-card:hover {
            transform: scale(1.01);
            border-color: rgba(255, 255, 255, 0.7);
            box-shadow: 0 6px 20px rgba(108, 93, 211, 0.8);
        }

        .subscription-card.selected {
            border-color: #6C5DD3;
            background: rgba(108, 93, 211, 0.12);
            box-shadow: 0 6px 20px rgba(108, 93, 211, 0.8);
        }

        .subscription-card .card-body {
            width: 100%;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            padding: 0;
        }

        .subscription-info-card, .language-card {
            width: 100%;
            background: rgba(16, 16, 16, 0.85);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(108, 93, 211, 0.6);
            color: #ffffff;
            display: flex;
            flex-direction: column;
            transition: all 0.2s ease;
            padding: 12px 24px;
            margin: 8px 0;
            position: relative;
            opacity: 0;
        }

        .subscription-info-card.reveal, .language-card.reveal {
            animation: fadeInUp 0.6s ease both;
        }

        .subscription-info-card:hover, .language-card:hover {
            transform: scale(1.01);
            border-color: rgba(255, 255, 255, 0.7);
            box-shadow: 0 6px 20px rgba(108, 93, 211, 0.8);
        }

        .subscription-info-card .card-body, .language-card .card-body {
            width: 100%;
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            align-items: center;
            padding: 0;
        }

        .subscription-details-card {
            margin: 15px 0;
            padding: 20px;
            width: 100%;
            background: rgba(16, 16, 16, 0.85);
            border: 2px solid rgba(255, 255, 255, 0.5);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(108, 93, 211, 0.6);
            backdrop-filter: blur(12px);
            opacity: 0;
        }

        .subscription-details-card.reveal {
            animation: fadeInUp 0.6s ease both;
        }

        .confirm-modal-content {
            background: linear-gradient(135deg, rgba(16, 16, 16, 0.9), rgba(30, 30, 30, 0.9));
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 8px 24px rgba(108, 93, 211, 0.6), 0 0 20px rgba(108, 93, 211, 0.3);
            backdrop-filter: blur(12px);
            width: 90%;
            max-width: 400px;
            text-align: center;
            animation: fadeInScale 0.4s ease-out;
        }

        .confirm-modal-content .confirm-title {
            font-size: 20px;
            font-weight: 600;
            color: #f0f0f0;
            text-shadow: 0 0 8px #6C5DD3;
            margin-bottom: 12px;
        }

        .confirm-modal-content .confirm-text {
            font-size: 16px;
            color: #cccccc;
            margin-bottom: 16px;
        }

        .confirm-modal-content .confirm-buttons {
            display: flex;
            gap: 12px;
            justify-content: center;
        }

        .tab-container {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin: 16px 0;
        }

        .tab-button {
            background: linear-gradient(135deg, #6C5DD3, #8F6CED);
            border-radius: 10px;
            padding: 8px 20px;
            font-size: 16px;
            font-weight: 600;
            border: none;
            color: #ffffff;
            transition: all 0.3s ease;
            box-shadow: 0 4px 12px rgba(108, 93, 211, 0.4);
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
        }

        .tab-button:hover {
            background: linear-gradient(135deg, #5A4DC6, #7D5BE0);
            transform: scale(1.03);
            box-shadow: 0 4px 16px rgba(108, 93, 211, 0.6);
        }

        .tab-button.active {
            background: linear-gradient(135deg, #5A4DC6, #7D5BE0);
            box-shadow: 0 4px 16px rgba(108, 93, 211, 0.6);
        }

        .balance-flask {
            background: rgba(16, 16, 16, 0.8);
            border-radius: 12px;
            padding: 8px 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .plus-btn {
            background: linear-gradient(135deg, #6C5DD3, #8F6CED);
            border-radius: 50%;
            width: 24px;
            height: 24px;
            font-size: 14px;
            border: none;
            color: #ffffff;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 12px rgba(108, 93, 211, 0.4);
        }

        .plus-btn:hover {
            background: linear-gradient(135deg, #5A4DC6, #7D5BE0);
            transform: scale(1.1);
            box-shadow: 0 4px 16px rgba(108, 93, 211, 0.6);
            animation: pulse 0.5s infinite;
        }

        .icon {
            width: 18px;
            height: 18px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
            transition: transform 0.3s ease;
        }

        .category-button:hover .icon {
            animation: vibrate 0.3s ease;
        }

        .modal {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease-out;
        }

        #productModal {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        #productModal .modal-content {
            background: rgba(16, 16, 16, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 20px;
            width: 90%;
            max-width: 800px;
            display: flex;
            gap: 20px;
            box-shadow: 0 8px 24px rgba(108, 93, 211, 0.6);
            backdrop-filter: blur(12px);
            animation: fadeInScale 0.4s ease-out;
        }

        #productModal .modal-content img {
            width: 40%;
            height: auto;
            border-radius: 12px;
            object-fit: cover;
        }

        #productModal .modal-content .product-details {
            width: 60%;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        #productModal .modal-content .product-title {
            font-size: 24px;
            font-weight: 600;
            color: #f0f0f0;
            margin-bottom: 12px;
            text-shadow: 0 0 8px #6C5DD3;
        }

        #productModal .modal-content .product-desc {
            font-size: 16px;
            color: #cccccc;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        #productModal .modal-content .buy-btn {
            width: 50%;
            padding: 12px 16px;
            background: linear-gradient(135deg, #6C5DD3, #8F6CED);
            border: 2px solid #6C5DD3;
            border-radius: 20px;
            color: #ffffff;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 12px rgba(108, 93, 211, 0.5);
            align-self: flex-start;
        }

        #productModal .modal-content .buy-btn:hover {
            background: linear-gradient(135deg, #5A4DC6, #7D5BE0);
            border: 2px solid #5A4DC6;
            box-shadow: 0 0 18px rgba(108, 93, 211, 0.9);
            transform: scale(1.02);
            border-radius: 20px;
        }

        .category-buttons {
            position: fixed;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 12px;
            z-index: 10;
            background: rgba(16, 16, 16, 0.95);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(108, 93, 211, 0.3);
            border-radius: 16px;
            padding: 8px 12px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
        }

        .category-button {
            position: relative;
            background-color: transparent;
            border-radius: 50%;
            padding: 0;
            font-size: 16px;
            border: none;
            color: #ffffff;
            transition: all 0.3s ease;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .category-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #6C5DD3, #8F6CED);
            border-radius: 50%;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: -1;
        }

        .category-button.selected::before {
            opacity: 1;
        }

        .category-button:hover {
            background-color: rgba(108, 93, 211, 0.15);
            transform: scale(1.1);
        }

        .category-button:active {
            background-color: rgba(108, 93, 211, 0.3);
            transform: scale(0.95);
        }

        .category-button.selected {
            box-shadow: 0 4px 12px rgba(108, 93, 211, 0.5);
        }

        #mainContent {
            width: 100%;
            padding: 0 16px;
        }

        #storeSection {
            margin-top: 24px;
        }

        #scenariosContent .grid {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 16px;
        }

        #itemsContent .grid, #currencySection .grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        #settingsSection {
            width: 100%;
            margin: 24px 0;
        }

        @media (max-width: 768px) {
            body {
                padding: 100px 12px 80px;
            }

            .header-container {
                height: 70px;
                padding: 10px 16px;
            }

            #mainContent {
                padding: 0 12px;
            }

            .card.scenario-card {
                max-width: 410px;
                min-height: 518px;
            }

            .card.item-card, .card.currency-card {
                max-width: 224px;
                min-height: 264px;
                margin: 4px;
            }

            .card.currency-card-wide {
                max-width: 464px;
            }

            .card.scenario-card img {
                height: 325px; /* Adjusted for increased height */
            }

            .card.item-card img, .card.currency-card img {
                height: 132px;
            }

            #productModal .modal-content {
                flex-direction: column;
                max-width: 600px;
            }

            #productModal .modal-content img {
                width: 100%;
                height: 300px;
            }

            #productModal .modal-content .product-details {
                width: 100%;
            }

            .subscription-card,
            .subscription-info-card,
            .language-card {
                padding: 10px 20px;
                margin: 6px 0;
            }

            .subscription-details-card {
                padding: 14px;
                margin: 10px 0;
            }

            .subscription-details-card h3 {
                font-size: 16px;
            }

            .subscription-card .card-title,
            .subscription-card .card-price,
            .subscription-info-card .card-title,
            .subscription-info-card .card-desc,
            .language-card .card-title,
            .language-card .card-desc {
                font-size: 16px;
            }
        }

        @media (max-width: 360px) {
            body {
                padding: 80px 8px 60px;
            }

            .header-container {
                height: 60px;
                padding: 8px 12px;
            }

            #mainContent {
                padding: 0 8px;
            }

            .card.scenario-card {
                max-width: 346px;
                min-height: 454px;
            }

            .card.item-card, .card.currency-card {
                max-width: 211px;
                min-height: 238px;
                margin: 4px;
            }

            .card.currency-card-wide {
                max-width: 438px;
            }

            .card.scenario-card img {
                height: 300px; /* Adjusted for increased height */
            }

            .card.item-card img, .card.currency-card img {
                height: 119px;
            }

            #productModal .modal-content img {
                height: 250px;
            }

            .subscription-card,
            .subscription-info-card,
            .language-card {
                padding: 8px 16px;
                margin: 4px 0;
            }

            .subscription-details-card {
                padding: 12px;
                margin: 8px 0;
            }

            .subscription-details-card h3 {
                font-size: 14px;
            }

            .subscription-card .card-title,
            .subscription-card .card-price,
            .subscription-info-card .card-title,
            .subscription-info-card .card-desc,
            .language-card .card-title,
            .language-card .card-desc {
                font-size: 14px;
            }
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInScale {
            0% {
                opacity: 0;
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }

        @keyframes vibrate {
            0% {
                transform: translateX(0);
            }
            20% {
                transform: translateX(-2px);
            }
            40% {
                transform: translateX(2px);
            }
            設置: {
                transform: translateX(-2px);
            }
            80% {
                transform: translateX(2px);
            }
            100% {
                transform: translateX(0);
            }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideSection {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideLeft {
            from { transform: translateX(-15px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideRight {
            from { transform: translateX(15px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body class="flex flex-col items-center">
    <div class="header-container">
        <div class="header-overlay"></div>
        <div id="sectionTitle" class="section-title"></div>
        <div class="balance-flask">
            <div class="balance-item">
                <span>📸</span>
                <span id="photoLimitDisplay">0 / 10</span>
            </div>
            <div class="balance-item">
                <span id="tokenCount">0</span>
                <span>🧊</span>
            </div>
            <button class="plus-btn" onclick="showCurrencySection()">
                <svg class="icon" viewBox="0 0 24 24">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </button>
        </div>
    </div>

    <div class="category-buttons">
        <button id="storeBtn" class="category-button selected" onclick="showSection('storeSection')">
            <svg class="icon" viewBox="0 0 24 24">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
        </button>
        <button id="subscriptionsBtn" class="category-button" onclick="showSection('subscriptionsSection')">
            <svg class="icon" viewBox="0 0 24 24">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        </button>
        <button id="settingsBtn" class="category-button" onclick="showSection('settingsSection')">
            <svg class="icon" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l-.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
        </button>
    </div>

    <div id="mainContent">
        <div id="storeSection">
            <div class="tab-container">
                <button id="scenariosTab" class="tab-button active" onclick="showStoreTab('scenarios')">
                    <span id="scenariosTabLabel"></span>
                </button>
                <button id="itemsTab" class="tab-button" onclick="showStoreTab('items')">
                    <span id="itemsTabLabel"></span>
                </button>
            </div>
            <div id="scenariosContent" class="store-content">
                <div class="grid">
                    <div class="card scenario-card">
                        <img src="https://via.placeholder.com/360x240" alt="Tutor Asleep Scene" id="scenario1Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario1Title"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('scenario1')">
                                    <span id="scenario1Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card scenario-card">
                        <img src="https://via.placeholder.com/360x240" alt="Teacher After School" id="scenario2Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario2Title"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('scenario2')">
                                    <span id="scenario2Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card scenario-card">
                        <img src="https://via.placeholder.com/360x240" alt="Policewoman Stop" id="scenario3Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario3Title"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('scenario3')">
                                    <span id="scenario3Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card scenario-card">
                        <img src="https://via.placeholder.com/360x240" alt="Helping Friend Scene" id="scenario4Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario4Title"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('scenario4')">
                                    <span id="scenario4Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="itemsContent" class="store-content hidden">
                <div class="grid">
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Anal Plug Item" id="analPlugImage">
                        <div class="card-body">
                            <div class="card-title" id="analPlug"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('analPlug')">
                                    <span id="buyBtnAnalPlug"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Seductive Pajamas" id="seductivePajamasImage">
                        <div class="card-body">
                            <div class="card-title" id="seductivePajamas"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('seductivePajamas')">
                                    <span id="buyBtnSeductivePajamas"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Seductive Stockings" id="seductiveStockingsImage">
                        <div class="card-body">
                            <div class="card-title" id="seductiveStockings"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('seductiveStockings')">
                                    <span id="buyBtnSeductiveStockings"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Furry Handcuffs" id="furryHandcuffsImage">
                        <div class="card-body">
                            <div class="card-title" id="furryHandcuffs"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('furryHandcuffs')">
                                    <span id="buyBtnFurryHandcuffs"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Water-Based Lube" id="waterBasedLubeImage">
                        <div class="card-body">
                            <div class="card-title" id="waterBasedLube"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('waterBasedLube')">
                                    <span id="buyBtnWaterBasedLube"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Truth or Dare Game" id="truthOrDareGameImage">
                        <div class="card-body">
                            <div class="card-title" id="truthOrDareGame"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('truthOrDareGame')">
                                    <span id="buyBtnTruthOrDareGame"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Masks & Blindfolds" id="masksBlindfoldsImage">
                        <div class="card-body">
                            <div class="card-title" id="masksBlindfolds"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('masksBlindfolds')">
                                    <span id="buyBtnMasksBlindfolds"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Massage Foam Item" id="massageFoamImage">
                        <div class="card-body">
                            <div class="card-title" id="massageFoam"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('massageFoam')">
                                    <span id="buyBtnMassageFoam"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card item-card">
                        <img src="https://via.placeholder.com/360x240" alt="Sex Swing Item" id="sexSwingImage">
                        <div class="card-body">
                            <div class="card-title" id="sexSwing"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="showProductDetails('sexSwing')">
                                    <span id="buyBtnSexSwing"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="subscriptionsSection" class="hidden">
            <div id="subscriptionDetails" class="subscription-details-card">
                <h3 id="detailsHeader"></h3>
                <div id="subscriptionsDesc"></div>
            </div>
            <div class="subscription-list">
                <div class="subscription-card" onclick="selectPlan(1)">
                    <div class="card-body">
                        <div class="card-title">1 Day Pass</div>
                        <div class="card-price">$2.00</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(2)">
                    <div class="card-body">
                        <div class="card-title">3 Days Pass</div>
                        <div class="card-price">$5.00</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(3)">
                    <div class="card-body">
                        <div class="card-title">1 Week Pass</div>
                        <div class="card-price">$13.00</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(4)">
                    <div class="card-body">
                        <div class="card-title">1 Month Pass</div>
                        <div class="card-price">$25.00</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(5)">
                    <div class="card-body">
                        <div class="card-title">3 Months Pass</div>
                        <div class="card-price">$70.00</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(6)">
                    <div class="card-body">
                        <div class="card-title">Forever Pass</div>
                        <div class="card-price">$50.00</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(7)">
                    <div class="card-body">
                        <div class="card-title">Deluxe Pass</div>
                        <div class="card-price">$100.00</div>
                    </div>
                </div>
                <div class="card-actions">
                    <button id="buySubscriptionBtn" class="btn" onclick="buySelectedSubscription()">
                        <span id="buyBtnText"></span>
                    </button>
                </div>
            </div>
        </div>

        <div id="currencySection" class="hidden">
            <div class="grid">
                <div class="card currency-card currency-card-wide">
                    <img src="https://via.placeholder.com/360x240" alt="Want More Photos?" id="morePhotosImage">
                    <div class="card-body">
                        <div class="card-title" id="morePhotos"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="showSection('subscriptionsSection')">
                                <span id="buyBtnMorePhotos"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card currency-card">
                    <img src="https://via.placeholder.com/360x240" alt="Small Pack" id="smallPackImage">
                    <div class="card-body">
                        <div class="card-title" id="smallPack"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(100, PRICES.currency.smallPack)">
                                <span id="buyBtnSmallPack"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card currency-card">
                    <img src="https://via.placeholder.com/360x240" alt="Medium Pack" id="mediumPackImage">
                    <div class="card-body">
                        <div class="card-title" id="mediumPack"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(200, PRICES.currency.mediumPack)">
                                <span id="buyBtnMediumPack"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card currency-card">
                    <img src="https://via.placeholder.com/360x240" alt="Large Pack" id="largePackImage">
                    <div class="card-body">
                        <div class="card-title" id="largePack"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(500, PRICES.currency.largePack)">
                                <span id="buyBtnLargePack"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card currency-card">
                    <img src="https://via.placeholder.com/360x240" alt="Mega Pack" id="megaPackImage">
                    <div class="card-body">
                        <div class="card-title" id="megaPack"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(1000, PRICES.currency.megaPack)">
                                <span id="buyBtnMegaPack"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="settingsSection" class="hidden">
            <div class="subscription-info-card">
                <div class="card-body">
                    <div class="card-title" id="settingsTitle"></div>
                    <div class="card-desc" id="subscriptionInfo"></div>
                </div>
                <div class="card-actions">
                    <button id="renewBtn" class="btn" onclick="showSubscriptionSection()">
                        <span id="renewBtnText"></span>
                    </button>
                </div>
            </div>
            <div class="language-card">
                <div class="card-body">
                    <div class="card-title" id="languageLabel"></div>
                    <div class="card-desc" id="currentLanguage"></div>
                </div>
                <div class="card-actions">
                    <button class="btn" onclick="toggleLanguage()">
                        <span id="languageBtnText"></span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <div id="productModal" class="modal fixed inset-0 flex items-center justify-center hidden">
        <div class="modal-content">
            <img id="productImage" src="" alt="Product Image">
            <div class="product-details">
                <div class="product-title" id="productTitle"></div>
                <div class="product-desc" id="productDesc"></div>
                <button id="buyProductBtn" class="buy-btn">Buy for <span id="productPrice"></span>🧊</button>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal fixed inset-0 flex items-center justify-center hidden">
        <div class="confirm-modal-content">
            <h3 id="confirmTitle" class="confirm-title"></h3>
            <p id="confirmText" class="confirm-text"></p>
            <div class="confirm-buttons">
                <button id="confirmBtn" class="btn">Confirm</button>
                <button id="cancelBtn" class="btn">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        const LANGUAGES = {
            en: { flag: '🇺🇸', name: 'English' },
            ru: { flag: '🇷🇺', name: 'Русский' }
        };

        const translations = {
            en: {
                sectionTitleStore: 'Store',
                sectionTitleSubscriptions: 'Subscriptions',
                sectionTitleCurrency: 'Currency',
                sectionTitleSettings: 'Settings',
                scenariosTab: 'Scenarios',
                itemsTab: 'Items',
                tokenCount: '0',
                languageLabel: 'Language',
                languageBtnText: 'Change Language',
                settingsTitle: 'Your Plan',
                subscriptionInfo: 'Deluxe until May 18, 2025',
                renewBtnText: 'Renew',
                scenario1Title: 'Tutor Sleep Scene',
                scenario1Desc: 'You enter her house, the door ajar, she’s naked and dreaming of you. Wake her with a sinful touch! 😈',
                scenario1Btn: 'View Details',
                scenario2Title: 'Teacher Afterschool',
                scenario2Desc: 'Alone with her to fix grades, her tight skirt teases as she leans over. 🧊',
                scenario2Btn: 'View Details',
                scenario3Title: 'Policewoman Stop',
                scenario3Desc: 'She stops you in the wilderness, no license—her smirk promises a spicy punishment! 💋',
                scenario3Btn: 'View Details',
                scenario4Title: 'Help Friend Scene',
                scenario4Desc: 'Her computer freezes, shy glances turn into bold invitations as you lean in. 😏',
                scenario4Btn: 'View Details',
                detailsHeader: 'Premium Benefits',
                subscriptionsDescStandard: '<p><strong>Premium Benefits 🧊✨</strong></p><p>50 photos/day 📷</p><p>Unlimited Chat 💬</p><p>Exclusive Outfits 👗</p><p>Lightning-Fast Responses ⚡</p><p>Enhanced Images 🌟</p><p>Priority Access 🎟️</p><p>Secret Features 🔒</p><p>Elite Support 🤝</p>',
                subscriptionsDescDeluxe: '<p><strong>Deluxe Benefits 🎉</strong></p><p>Unlimited photos 📷</p><p>Unlimited Chat 💬</p><p>Exclusive Outfits 👗</p><p>Lightning-Fast Responses ⚡</p><p>Enhanced Images 🌟</p><p>Priority Access 🎟️</p><p>Secret Features 🔒</p><p>Elite Support 🤝</p><p>VIP Community Access 👑</p>',
                sub1Day: '1 Day Pass',
                sub3Days: '3 Days Pass',
                sub1Week: '1 Week Pass',
                sub1Month: '1 Month Pass',
                sub3Months: '3 Months Pass',
                subForever: 'Forever Pass',
                subDeluxe: 'Deluxe Pass',
                buyBtnText: 'Buy Subscription',
                morePhotos: 'Need More Photos?',
                morePhotosDesc: 'Unlock higher photo limits!',
                buyBtnMorePhotos: 'View Subscriptions',
                smallPack: 'Small Ice Pack',
                smallPackDesc: '100 🧊',
                buyBtnSmallPack: 'Buy for $1.00',
                mediumPack: 'Medium Ice Pack',
                mediumPackDesc: '200 🧊',
                buyBtnMediumPack: 'Buy for $1.50',
                largePack: 'Large Ice Pack',
                largePackDesc: '500 🧊',
                buyBtnLargePack: 'Buy for $3.00',
                megaPack: 'Mega Ice Pack',
                megaPackDesc: '1000 🧊',
                buyBtnMegaPack: 'Buy for $5.00',
                analPlug: 'Silicone Plug',
                analPlugDesc: 'Smooth silicone plug for beginners. 💜',
                buyBtnAnalPlug: 'View Details',
                seductivePajamas: 'Silk Pajama Set',
                seductivePajamasDesc: 'Silk set for the mood. 🌙',
                buyBtnSeductivePajamas: 'View Details',
                seductiveStockings: 'Lace Stockings',
                seductiveStockingsDesc: 'Lace stockings for a teasing effect. 🖤',
                buyBtnSeductiveStockings: 'View Details',
                furryHandcuffs: 'Soft Furry Cuffs',
                furryHandcuffsDesc: 'Soft cuffs for playful restraints. 🖐️',
                buyBtnFurryHandcuffs: 'View Details',
                waterBasedLube: 'Water Lube Gel',
                waterBasedLubeDesc: 'Smooth glide for more pleasure. 💦',
                buyBtnWaterBasedLube: 'View Details',
                truthOrDareGame: 'Spicy Dare Game',
                truthOrDareGameDesc: 'Spicy game for bold couples. 🎲',
                buyBtnTruthOrDareGame: 'View Details',
                masksBlindfolds: 'Satin Mask Set',
                masksBlindfoldsDesc: 'Satin set to enhance sensations. 😷',
                buyBtnMasksBlindfolds: 'View Details',
                massageFoam: 'Sensual Foam',
                massageFoamDesc: 'Fragrant foam for sensual touch. 🫧',
                buyBtnMassageFoam: 'View Details',
                sexSwing: 'Swing for Play',
                sexSwingDesc: 'Explore new positions with ease. 🏋️',
                buyBtnSexSwing: 'View Details',
                confirmTitle: 'Confirm Purchase',
                confirmText: 'Are you sure you want to proceed with the purchase?',
                cancelText: 'Cancel'
            },
            ru: {
                sectionTitleStore: 'Магазин',
                sectionTitleSubscriptions: 'Подписки',
                sectionTitleCurrency: 'Валюта',
                sectionTitleSettings: 'Настройки',
                scenariosTab: 'Сценарии',
                itemsTab: 'Предметы',
                tokenCount: '0',
                languageLabel: 'Язык',
                languageBtnText: 'Сменить язык',
                settingsTitle: 'Ваш план',
                subscriptionInfo: 'Делюкс до 18 мая 2025',
                renewBtnText: 'Продлить',
                scenario1Title: 'Сонный репетитор',
                scenario1Desc: 'Ты заходишь в её дом, дверь приоткрыта, она голая и мечтает о тебе. Разбуди её грешным касанием! 😈',
                scenario1Btn: 'Подробнее',
                scenario2Title: 'Учитель после уроков',
                scenario2Desc: 'Наедине с ней, чтобы исправить оценки, её обтягивающая юбка дразнит, когда она наклоняется. 🧊',
                scenario2Btn: 'Подробнее',
                scenario3Title: 'Остановка полицейской',
                scenario3Desc: 'Она останавливает тебя в глуши, без прав — её ухмылка обещает пикантное наказание! 💋',
                scenario3Btn: 'Подробнее',
                scenario4Title: 'Помощь подруге',
                scenario4Desc: 'Её компьютер завис, а робкие взгляды превращаются в дерзкие приглашения, когда ты наклоняешься. 😏',
                scenario4Btn: 'Подробнее',
                detailsHeader: 'Преимущества премиума',
                subscriptionsDescStandard: '<p><strong>Преимущества премиума 🧊✨</strong></p><p>50 фото в день 📷</p><p>Безлимитный чат 💬</p><p>Эксклюзивные костюмы 👗</p><p>Молниеносные ответы ⚡</p><p>Улучшенные изображения 🌟</p><p>Приоритетный доступ 🎟️</p><p>Секретные функции 🔒</p><p>Элитная поддержка 🤝</p>',
                subscriptionsDescDeluxe: '<p><strong>Преимущества делюкса 🎉</strong></p><p>Безлимит фото 📷</p><p>Безлимитный чат 💬</p><p>Эксклюзивные костюмы 👗</p><p>Молниеносные ответы ⚡</p><p>Улучшенные изображения 🌟</p><p>Приоритетный доступ 🎟️</p><p>Секретные функции 🔒</p><p>Элитная поддержка 🤝</p><p>Доступ к VIP-клубу 👑</p>',
                sub1Day: 'Пропуск на 1 день',
                sub3Days: 'Пропуск на 3 дня',
                sub1Week: 'Пропуск на 1 неделю',
                sub1Month: 'Пропуск на 1 месяц',
                sub3Months: 'Пропуск на 3 месяца',
                subForever: 'Вечный пропуск',
                subDeluxe: 'Делюкс пропуск',
                buyBtnText: 'Купить подписку',
                morePhotos: 'Хотите больше фото?',
                morePhotosDesc: 'Разблокируйте больше лимитов на фото!',
                buyBtnMorePhotos: 'Посмотреть подписки',
                smallPack: 'Малый набор льда',
                smallPackDesc: '100 🧊',
                buyBtnSmallPack: 'Купить за $1.00',
                mediumPack: 'Средний набор льда',
                mediumPackDesc: '200 🧊',
                buyBtnMediumPack: 'Купить за $1.50',
                largePack: 'Большой набор льда',
                largePackDesc: '500 🧊',
                buyBtnLargePack: 'Купить за $3.00',
                megaPack: 'Мега набор льда',
                megaPackDesc: '1000 🧊',
                buyBtnMegaPack: 'Купить за $5.00',
                analPlug: 'Силиконовая пробка',
                analPlugDesc: 'Гладкая силиконовая пробка для новичков. 💜',
                buyBtnAnalPlug: 'Подробнее',
                seductivePajamas: 'Шелковая пижама',
                seductivePajamasDesc: 'Шелковый комплект для настроения. �ozi',
                buyBtnSeductivePajamas: 'Подробнее',
                seductiveStockings: 'Кружевные чулки',
                seductiveStockingsDesc: 'Кружевные чулки для дразнящего эффекта. 🖤',
                buyBtnSeductiveStockings: 'Подробнее',
                furryHandcuffs: 'Мягкие наручники',
                furryHandcuffsDesc: 'Мягкие наручники для игривых ограничений. 🖐️',
                buyBtnFurryHandcuffs: 'Подробнее',
                waterBasedLube: 'Смазка водная',
                waterBasedLubeDesc: 'Плавное скольжение для большего удовольствия. 💦',
                buyBtnWaterBasedLube: 'Подробнее',
                truthOrDareGame: 'Игра Правда-Действие',
                truthOrDareGameDesc: 'Пикантная игра для смелых пар. 🎲',
                buyBtnTruthOrDareGame: 'Подробнее',
                masksBlindfolds: 'Маска и повязка',
                masksBlindfoldsDesc: 'Атласный набор для усиления ощущений. 😷',
                buyBtnMasksBlindfolds: 'Подробнее',
                massageFoam: 'Пена для массажа',
                massageFoamDesc: 'Ароматная пена для чувственного прикосновения. 🫧',
                buyBtnMassageFoam: 'Подробнее',
                sexSwing: 'Качели для игр',
                sexSwingDesc: 'Открой новые позы с легкостью. 🏋️',
                buyBtnSexSwing: 'Подробнее',
                confirmTitle: 'Подтверждение покупки',
                confirmText: 'Вы уверены, что хотите продолжить покупку?',
                cancelText: 'Отмена'
            }
        };

        let currentLanguage = 'en';
        let currentSection = 'storeSection';
        let currentStoreTab = 'scenarios';
        let selectedPlan = null;
        let userTokens = 0;
        let photoLimit = { current: 0, max: 10 };
        const subscription = {
            plan: 'Deluxe',
            expirationDate: new Date('2025-05-18')
        };

        function toggleLanguage() {
            currentLanguage = currentLanguage === 'en' ? 'ru' : 'en';
            updateUI();
        }

        function showSubscriptionSection() {
            showSection('subscriptionsSection');
            if (subscription.plan === 'Deluxe') {
                selectPlan(7);
            } else {
                selectPlan(1);
            }
        }

        function updateLanguage() {
            const trans = translations[currentLanguage];
            document.getElementById('languageLabel').textContent = trans.languageLabel;
            document.getElementById('currentLanguage').textContent = LANGUAGES[currentLanguage].name;
            document.getElementById('languageBtnText').textContent = trans.languageBtnText;
            document.getElementById('settingsTitle').textContent = trans.settingsTitle;
            document.getElementById('subscriptionInfo').textContent = `${subscription.plan} until ${subscription.expirationDate.toLocaleDateString()}`;
            document.getElementById('renewBtnText').textContent = trans.renewBtnText;

            const daysLeft = Math.floor((subscription.expirationDate - new Date()) / (1000 * 60 * 60 * 24));
            document.getElementById('renewBtn').classList.toggle('hidden', daysLeft > 30);

            updateSectionContent();
        }

        function updateSectionContent() {
            const trans = translations[currentLanguage];
            const sectionTitles = {
                storeSection: trans.sectionTitleStore,
                subscriptionsSection: trans.sectionTitleSubscriptions,
                currencySection: trans.sectionTitleCurrency,
                settingsSection: trans.sectionTitleSettings
            };
            document.getElementById('sectionTitle').textContent = sectionTitles[currentSection] || '';

            document.getElementById('scenariosTabLabel').textContent = trans.scenariosTab;
            document.getElementById('itemsTabLabel').textContent = trans.itemsTab;

            if (currentSection === 'storeSection') {
                if (currentStoreTab === 'scenarios') {
                    for (let i = 1; i <= 4; i++) {
                        document.getElementById(`scenario${i}Title`).textContent = trans[`scenario${i}Title`];
                        document.getElementById(`scenario${i}Btn`).textContent = trans[`scenario${i}Btn`];
                    }
                } else {
                    ['analPlug', 'seductivePajamas', 'seductiveStockings', 'furryHandcuffs', 'waterBasedLube', 'truthOrDareGame', 'masksBlindfolds', 'massageFoam', 'sexSwing'].forEach(item => {
                        document.getElementById(item).textContent = trans[item];
                        document.getElementById(`buyBtn${item.charAt(0).toUpperCase() + item.slice(1)}`).textContent = trans[`buyBtn${item.charAt(0).toUpperCase() + item.slice(1)}`];
                    });
                }
            } else if (currentSection === 'subscriptionsSection') {
                document.getElementById('detailsHeader').textContent = trans.detailsHeader;
                document.getElementById('subscriptionsDesc').innerHTML = selectedPlan === 7 ? trans.subscriptionsDescDeluxe : trans.subscriptionsDescStandard;
                ['sub1Day', 'sub3Days', 'sub1Week', 'sub1Month', 'sub3Months', 'subForever', 'subDeluxe'].forEach((plan, index) => {
                    const element = document.querySelector(`.subscription-card:nth-child(${index + 1}) .card-title`);
                    if (element) element.textContent = trans[plan];
                });
                document.getElementById('buyBtnText').textContent = trans.buyBtnText;
            } else if (currentSection === 'currencySection') {
                ['morePhotos', 'smallPack', 'mediumPack', 'largePack', 'megaPack'].forEach(item => {
                    document.getElementById(item).textContent = trans[item];
                    document.getElementById(`buyBtn${item.charAt(0).toUpperCase() + item.slice(1)}`).textContent = trans[`buyBtn${item.charAt(0).toUpperCase() + item.slice(1)}`];
                });
            }
        }

        function showSection(sectionId) {
            document.querySelectorAll('#mainContent > div').forEach(div => div.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            currentSection = sectionId;

            document.querySelectorAll('.category-button').forEach(btn => btn.classList.remove('selected'));
            const buttonMap = {
                storeSection: 'storeBtn',
                subscriptionsSection: 'subscriptionsBtn',
                settingsSection: 'settingsBtn',
                currencySection: 'storeBtn'
            };
            document.getElementById(buttonMap[sectionId]).classList.add('selected');

            updateLanguage();
            revealElements();
        }

        function showStoreTab(tabId) {
            currentStoreTab = tabId;
            document.querySelectorAll('.store-content').forEach(content => content.classList.add('hidden'));
            document.getElementById(`${tabId}Content`).classList.remove('hidden');

            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(`${tabId}Tab`).classList.add('active');

            updateSectionContent();
            revealElements();
        }

        function showCurrencySection() {
            showSection('currencySection');
        }

        function showProductDetails(productId) {
            const trans = translations[currentLanguage];
            const modal = document.getElementById('productModal');
            const productImage = document.getElementById('productImage');
            const productTitle = document.getElementById('productTitle');
            const productDesc = document.getElementById('productDesc');
            const buyProductBtn = document.getElementById('buyProductBtn');
            const productPrice = document.getElementById('productPrice');

            const productData = {
                scenario1: { title: trans.scenario1Title, desc: trans.scenario1Desc, image: IMAGES.scenarios.scenario1, price: PRICES.scenarios.scenario1.ice },
                scenario2: { title: trans.scenario2Title, desc: trans.scenario2Desc, image: IMAGES.scenarios.scenario2, price: PRICES.scenarios.scenario2.ice },
                scenario3: { title: trans.scenario3Title, desc: trans.scenario3Desc, image: IMAGES.scenarios.scenario3, price: PRICES.scenarios.scenario3.ice },
                scenario4: { title: trans.scenario4Title, desc: trans.scenario4Desc, image: IMAGES.scenarios.scenario4, price: PRICES.scenarios.scenario4.ice },
                analPlug: { title: trans.analPlug, desc: trans.analPlugDesc, image: IMAGES.items.analPlug, price: PRICES.items.analPlug.ice },
                seductivePajamas: { title: trans.seductivePajamas, desc: trans.seductivePajamasDesc, image: IMAGES.items.seductivePajamas, price: PRICES.items.seductivePajamas.ice },
                seductiveStockings: { title: trans.seductiveStockings, desc: trans.seductiveStockingsDesc, image: IMAGES.items.seductiveStockings, price: PRICES.items.seductiveStockings.ice },
                furryHandcuffs: { title: trans.furryHandcuffs, desc: trans.furryHandcuffsDesc, image: IMAGES.items.furryHandcuffs, price: PRICES.items.furryHandcuffs.ice },
                waterBasedLube: { title: trans.waterBasedLube, desc: trans.waterBasedLubeDesc, image: IMAGES.items.waterBasedLube, price: PRICES.items.waterBasedLube.ice },
                truthOrDareGame: { title: trans.truthOrDareGame, desc: trans.truthOrDareGameDesc, image: IMAGES.items.truthOrDareGame, price: PRICES.items.truthOrDareGame.ice },
                masksBlindfolds: { title: trans.masksBlindfolds, desc: trans.masksBlindfoldsDesc, image: IMAGES.items.masksBlindfolds, price: PRICES.items.masksBlindfolds.ice },
                massageFoam: { title: trans.massageFoam, desc: trans.massageFoamDesc, image: IMAGES.items.massageFoam, price: PRICES.items.massageFoam.ice },
                sexSwing: { title: trans.sexSwing, desc: trans.sexSwingDesc, image: IMAGES.items.sexSwing, price: PRICES.items.sexSwing.ice }
            };

            const data = productData[productId];
            productImage.src = data.image;
            productTitle.textContent = data.title;
            productDesc.textContent = data.desc;
            productPrice.textContent = data.price;

            buyProductBtn.onclick = () => {
                modal.style.display = 'none';
                showConfirmModal(`${trans.confirmText} ${data.title} for ${data.price}🧊?`, () => {
                    if (userTokens >= data.price) {
                        userTokens -= data.price;
                        updateUI();
                        alert(`${data.title} purchased successfully!`);
                    } else {
                        alert('Not enough ice cubes!');
                    }
                });
            };

            modal.style.display = 'flex';
        }

        function closeProductModal() {
            document.getElementById('productModal').style.display = 'none';
        }

        function selectPlan(id) {
            const cards = document.querySelectorAll('.subscription-card');
            cards.forEach(card => card.classList.remove('selected'));
            cards[id - 1].classList.add('selected');
            selectedPlan = id;
            updateSectionContent();
        }

        function buySelectedSubscription() {
            if (!selectedPlan) {
                alert('Please select a plan!');
                return;
            }
            const planKeys = ['sub1Day', 'sub3Days', 'sub1Week', 'sub1Month', 'sub3Months', 'subForever', 'subDeluxe'];
            const plan = planKeys[selectedPlan - 1];
            showConfirmModal(`Purchase ${translations[currentLanguage][plan]} for $${PRICES.subscriptions[plan].price.toFixed(2)}?`, () => {
                alert(`${translations[currentLanguage][plan]} purchased successfully`);
                photoLimit = plan === 'subDeluxe' ? { current: 0, max: Infinity } : { current: 0, max: 50 };
                subscription.plan = plan === 'subDeluxe' ? 'Deluxe' : 'Standard';
                const currentDate = new Date();
                const durationDays = plan === 'sub1Day' ? 1 : plan === 'sub3Days' ? 3 : plan === 'sub1Week' ? 7 : plan === 'sub1Month' ? 30 : plan === 'sub3Months' ? 90 : plan === 'subForever' ? 365 * 100 : 365;
                subscription.expirationDate = new Date(currentDate.getTime() + durationDays * 24 * 60 * 60 * 1000);
                updateUI();
                updateLanguage();
                document.getElementById('subscriptionInfo').textContent = `${subscription.plan} until ${subscription.expirationDate.toLocaleDateString()}`;
            });
        }

        function buyTokens(amount, price) {
            showConfirmModal(`Purchase ${amount}🧊 for $${price.price.toFixed(2)}?`, () => {
                userTokens += amount;
                updateUI();
                alert(`${amount}🧊 purchased successfully`);
            });
        }

        function showConfirmModal(message, onConfirm) {
            const modal = document.getElementById('confirmModal');
            document.getElementById('confirmTitle').textContent = translations[currentLanguage].confirmTitle;
            document.getElementById('confirmText').textContent = message;
            modal.classList.remove('hidden');

            const confirmBtn = document.getElementById('confirmBtn');
            const cancelBtn = document.getElementById('cancelBtn');

            confirmBtn.onclick = () => {
                modal.classList.add('hidden');
                onConfirm();
            };

            cancelBtn.onclick = () => {
                modal.classList.add('hidden');
            };
        }

        function updateUI() {
            document.getElementById('tokenCount').textContent = userTokens;
            document.getElementById('photoLimitDisplay').textContent = `${photoLimit.current} / ${photoLimit.max}`;
            updateLanguage();
            revealElements();
        }

        function revealElements() {
            const elements = document.querySelectorAll('.card, .subscription-card, .subscription-info-card, .language-card, .subscription-details-card');
            elements.forEach((el, index) => {
                setTimeout(() => {
                    el.classList.add('reveal');
                }, index * 100);
            });
        }

        // Остальной код остается без изменений, заменяем только обработку событий

document.addEventListener('DOMContentLoaded', () => {
    updateUI();
    showSection('storeSection');
    showStoreTab('scenarios');

    document.querySelectorAll('.modal').forEach(modal => {
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });
    });

    // Улучшенная обработка событий касания и кликов
    function handleInteraction(e) {
        const target = e.target.closest('.btn, .category-button, .tab-button, .subscription-card');
        if (target) {
            // Предотвращаем стандартное поведение только для целевых элементов
            if (e.type === 'touchstart') {
                e.preventDefault();
            }
            // Вызываем соответствующий обработчик события click
            target.dispatchEvent(new Event('click', { bubbles: true }));
        }
    }

    // Добавляем обработчики событий
    document.addEventListener('touchstart', handleInteraction, { passive: false });
    document.addEventListener('pointerdown', handleInteraction, { passive: false });
    document.addEventListener('click', handleInteraction);

    window.PRICES = {
        scenarios: {
            scenario1: { ice: 50 },
            scenario2: { ice: 50 },
            scenario3: { ice: 50 },
            scenario4: { ice: 50 }
        },
        items: {
            analPlug: { ice: 30 },
            seductivePajamas: { ice: 40 },
            seductiveStockings: { ice: 35 },
            furryHandcuffs: { ice: 25 },
            waterBasedLube: { ice: 20 },
            truthOrDareGame: { ice: 45 },
            masksBlindfolds: { ice: 30 },
            massageFoam: { ice: 25 },
            sexSwing: { ice: 60 }
        },
        subscriptions: {
            sub1Day: { price: 2.00 },
            sub3Days: { price: 5.00 },
            sub1Week: { price: 13.00 },
            sub1Month: { price: 25.00 },
            sub3Months: { price: 70.00 },
            subForever: { price: 50.00 },
            subDeluxe: { price: 100.00 }
        },
        currency: {
            smallPack: { price: 1.00 },
            mediumPack: { price: 1.50 },
            largePack: { price: 3.00 },
            megaPack: { price: 5.00 }
        }
    };

    window.IMAGES = {
        scenarios: {
            scenario1: 'https://via.placeholder.com/360x240/6C5DD3/FFFFFF?text=Tutor+Sleep+Scene',
            scenario2: 'https://via.placeholder.com/360x240/8F6CED/FFFFFF?text=Teacher+Afterschool',
            scenario3: 'https://via.placeholder.com/360x240/5A4DC6/FFFFFF?text=Policewoman+Stop',
            scenario4: 'https://via.placeholder.com/360x240/7D5BE0/FFFFFF?text=Help+Friend+Scene'
        },
        items: {
            analPlug: 'https://via.placeholder.com/360x240/6C5DD3/FFFFFF?text=Silicone+Plug',
            seductivePajamas: 'https://via.placeholder.com/360x240/8F6CED/FFFFFF?text=Silk+Pajama+Set',
            seductiveStockings: 'https://via.placeholder.com/360x240/5A4DC6/FFFFFF?text=Lace+Stockings',
            furryHandcuffs: 'https://via.placeholder.com/360x240/7D5BE0/FFFFFF?text=Soft+Furry+Cuffs',
            waterBasedLube: 'https://via.placeholder.com/360x240/6C5DD3/FFFFFF?text=Water+Lube+Gel',
            truthOrDareGame: 'https://via.placeholder.com/360x240/8F6CED/FFFFFF?text=Spicy+Dare+Game',
            masksBlindfolds: 'https://via.placeholder.com/360x240/5A4DC6/FFFFFF?text=Satin+Mask+Set',
            massageFoam: 'https://via.placeholder.com/360x240/7D5BE0/FFFFFF?text=Sensual+Foam',
            sexSwing: 'https://via.placeholder.com/360x240/6C5DD3/FFFFFF?text=Swing+for+Play'
        },
        currency: {
            morePhotos: 'https://via.placeholder.com/360x240/8F6CED/FFFFFF?text=More+Photos',
            smallPack: 'https://via.placeholder.com/360x240/5A4DC6/FFFFFF?text=Small+Ice+Pack',
            mediumPack: 'https://via.placeholder.com/360x240/7D5BE0/FFFFFF?text=Medium+Ice+Pack',
            largePack: 'https://via.placeholder.com/360x240/6C5DD3/FFFFFF?text=Large+Ice+Pack',
            megaPack: 'https://via.placeholder.com/360x240/8F6CED/FFFFFF?text=Mega+Ice+Pack'
        }
    };

    // Update image sources on page load
    function updateImages() {
        for (let i = 1; i <= 4; i++) {
            document.getElementById(`scenario${i}Image`).src = IMAGES.scenarios[`scenario${i}`];
        }
        ['analPlug', 'seductivePajamas', 'seductiveStockings', 'furryHandcuffs', 'waterBasedLube', 'truthOrDareGame', 'masksBlindfolds', 'massageFoam', 'sexSwing'].forEach(item => {
            document.getElementById(`${item}Image`).src = IMAGES.items[item];
        });
        ['morePhotos', 'smallPack', 'mediumPack', 'largePack', 'megaPack'].forEach(item => {
            document.getElementById(`${item}Image`).src = IMAGES.currency[item];
        });
    }

    // Initialize the app
    function initializeApp() {
        updateImages();
        updateUI();
        showSection('storeSection');
        showStoreTab('scenarios');
        selectPlan(subscription.plan === 'Deluxe' ? 7 : 1);
    }

    // Handle window resize for responsive adjustments
    window.addEventListener('resize', () => {
        revealElements();
    });

    // Initialize on page load
    initializeApp();
});
</script>
</body>
</html>
