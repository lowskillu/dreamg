<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adventure App</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: url('https://cdn.discordapp.com/attachments/1349800672035475533/1377962570501066863/91ae8a950b924696.jpg?ex=683adf26&is=68398da6&hm=8eeede46db8fe6b6eb7923dc947b5dada91c3b2f11bd822067ab244a04099346') no-repeat center center fixed;
            background-size: cover;
            color: #f0f0f0;
            min-height: 100vh;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .card {
            width: 100%;
            max-width: 260px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
            overflow: hidden;
            color: #f0f0f0;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            position: relative;
            margin: 0 auto;
        }

        .card:hover {
            transform: translateY(-4px);
        }

        .card img {
            width: 100%;
            height: auto;
            display: block;
        }

        .card-body {
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
        }

        .card-desc {
            font-size: 14px;
            color: #cccccc;
            line-height: 1.4;
        }

        .card-price {
            font-size: 14px;
            color: #cccccc;
            line-height: 1.4;
        }

        .card-actions {
            margin-top: 16px;
        }

        .btn {
            width: 100%;
            padding: 10px 0;
            background-color: #6C5DD3;
            border: none;
            border-radius: 12px;
            color: #ffffff;
            font-size: 14px;
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            transition: background-color 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 0 12px rgba(108, 93, 211, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
        }

        .btn:hover {
            background-color: #5A4DC6;
            box-shadow: 0 0 18px rgba(108, 93, 211, 0.9);
        }

        .subscription-card {
            width: 100%;
            max-width: 400px;
            background: rgba(16, 16, 16, 0.85);
            border: 1px solid rgba(108, 93, 211, 0.3);
            border-radius: 12px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
                       0 0 0 1px rgba(108, 93, 211, 0.2),
                       0 0 20px rgba(108, 93, 211, 0.2);
            overflow: hidden;
            color: #f0f0f0;
            display: flex;
            flex-direction: column;
            transition: all 0.2s ease;
            padding: 12px 20px;
            cursor: pointer;
            margin: 8px auto;
            position: relative;
        }

        .subscription-card:hover {
            transform: translateY(-2px);
            border-color: rgba(108, 93, 211, 0.4);
            box-shadow: 0 6px 24px rgba(108, 93, 211, 0.25),
                       0 0 0 1px rgba(108, 93, 211, 0.3),
                       0 0 25px rgba(108, 93, 211, 0.3);
        }

        .subscription-card.selected {
            border-color: #6C5DD3;
            background: rgba(108, 93, 211, 0.12);
            box-shadow: 0 6px 24px rgba(108, 93, 211, 0.3),
                       0 0 0 1px rgba(108, 93, 211, 0.4),
                       0 0 30px rgba(108, 93, 211, 0.4);
        }

        .subscription-card .card-body {
            padding: 0;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-between;
        }

        .subscription-card .card-title {
            font-size: 15px;
            font-weight: 500;
            color: #ffffff;
        }

        .subscription-card .card-price {
            font-size: 14px;
            color: #6C5DD3;
            font-weight: 500;
        }

        .subscription-card .checkmark {
            position: absolute;
            top: 50%;
            right: 12px;
            transform: translateY(-50%);
            width: 18px;
            height: 18px;
            background: #6C5DD3;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-size: 10px;
            transition: all 0.2s ease;
            opacity: 0;
        }

        .subscription-card.selected .checkmark {
            opacity: 1;
        }

        .subscription-info-card {
            min-height: 120px;
            width: 100%;
            max-width: 400px;
            padding: 16px 20px;
            margin: 0 auto 15px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: rgba(16, 16, 16, 0.85);
            border: 1px solid rgba(108, 93, 211, 0.3);
            border-radius: 16px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
                       0 0 0 1px rgba(108, 93, 211, 0.2),
                       0 0 20px rgba(108, 93, 211, 0.2);
        }

        .language-card {
            height: 60px;
            width: 100%;
            max-width: 400px;
            padding: 10px 20px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: rgba(16, 16, 16, 0.85);
            border: 1px solid rgba(108, 93, 211, 0.3);
            border-radius: 16px;
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
                       0 0 0 1px rgba(108, 93, 211, 0.2),
                       0 0 20px rgba(108, 93, 211, 0.2);
        }

        .language-card .card-body {
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .language-card .card-title {
            font-size: 16px;
            font-weight: 500;
            color: #ffffff;
        }

        .language-card .card-desc {
            font-size: 16px;
            color: #6C5DD3;
            font-weight: 500;
        }

        .subscription-details {
            margin: 12px auto;
            padding: 16px 20px;
            width: 100%;
            max-width: 400px;
            background: rgba(16, 16, 16, 0.85);
            border: 1px solid rgba(108, 93, 211, 0.3);
            border-radius: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
                       0 0 0 1px rgba(108, 93, 211, 0.2),
                       0 0 20px rgba(108, 93, 211, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }

        .confirm-modal-content {
            background: rgba(16, 16, 16, 0.85);
            border: 1px solid rgba(108, 93, 211, 0.3);
            border-radius: 16px;
            padding: 16px 20px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3),
                       0 0 0 1px rgba(108, 93, 211, 0.2),
                       0 0 20px rgba(108, 93, 211, 0.2);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            width: 90%;
            max-width: 400px;
            position: relative;
            overflow: hidden;
        }

        .confirm-title {
            font-size: 18px;
            font-weight: 600;
            color: #f0f0f0;
            animation: slideLeft 0.5s ease-out;
        }

        .confirm-text {
            font-size: 14px;
            color: #cccccc;
            line-height: 1.4;
            animation: slideRight 0.5s ease-out 0.1s;
            animation-fill-mode: both;
        }

        .confirm-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 16px;
            animation: slideUp 0.5s ease-out 0.2s;
            animation-fill-mode: both;
        }

        .tab-container {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        .tab-button {
            background-color: #6C5DD3;
            border-radius: 20px;
            padding: 6px 15px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            border: none;
            color: #ffffff;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            box-shadow: 0 0 12px rgba(108, 93, 211, 0.5);
        }

        .tab-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 18px rgba(108, 93, 211, 0.9);
        }

        .tab-button.active {
            background-color: #5A4DC6;
            box-shadow: 0 0 18px rgba(108, 93, 211, 0.9);
        }

        .balance-flask {
            background: rgba(16, 16, 16, 0.8);
            border-radius: 16px;
            padding: 8px 16px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .balance-item {
            display: flex;
            align-items: center;
            font-size: 14px;
            font-weight: 500;
            color: #f0f0f0;
            gap: 3px;
        }

        .plus-btn {
            background-color: #6C5DD3;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            border: none;
            color: #ffffff;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 0 12px rgba(108, 93, 211, 0.5);
        }

        .plus-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 18px rgba(108, 93, 211, 0.9);
        }

        .icon {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
        }

        .modal {
            background: rgba(10, 10, 10, 0.95);
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease-out;
        }

        .neon-text {
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 600;
            color: #f0f0f0;
            animation: neonFlicker 2.5s infinite;
        }

        h2, h3 {
            font-family: 'Inter', sans-serif;
            font-size: 18px;
            font-weight: 600;
            color: #f0f0f0;
        }

        p {
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            color: #cccccc;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .grid-cols-4 {
                grid-template-columns: repeat(1, 1fr);
                gap: 12px;
                padding: 0 10px;
            }
            .grid-cols-2 {
                grid-template-columns: repeat(1, 1fr);
                gap: 12px;
                padding: 0 10px;
            }
            .grid-cols-1 {
                grid-template-columns: repeat(1, 1fr);
                gap: 12px;
                padding: 0 10px;
            }
            .col-span-2 {
                grid-column: span 1;
            }
            .card, .subscription-card,
            .subscription-info-card,
            .language-card,
            .subscription-details,
            .confirm-modal-content {
                margin: 0 auto;
                width: 100%;
                max-width: 360px;
                padding: 10px 16px;
            }
            .section-title {
                font-size: 1.5rem;
            }
            .section-title::before,
            .section-title::after {
                font-size: 14px;
            }
            .balance-flask {
                gap: 6px;
                padding: 5px 8px;
            }
            .balance-item {
                font-size: 12px;
            }
            .plus-btn {
                width: 18px;
                height: 18px;
                font-size: 10px;
            }
            .subscription-info-card {
                min-height: 100px;
                padding: 10px;
            }
            .language-card {
                height: 50px;
                padding: 8px 10px;
            }
            .subscription-card {
                max-width: 300px;
                padding: 10px 14px;
            }
            .subscription-card .card-title {
                font-size: 14px;
            }
            .subscription-card .card-price {
                font-size: 13px;
            }
            .subscription-card .checkmark {
                width: 16px;
                height: 16px;
                right: 10px;
            }
            .header-container {
                padding: 10px 14px;
            }
            .category-buttons {
                bottom: 12px;
                padding: 6px 12px;
                gap: 12px;
            }
            .category-button {
                width: 40px;
                height: 40px;
            }
        }

        @media (min-width: 769px) {
            .grid-cols-4 {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            .grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            .grid-cols-1 {
                grid-template-columns: repeat(1, 1fr);
                gap: 15px;
            }
            .col-span-2 {
                grid-column: span 2;
            }
            .content-section {
                max-width: 1200px;
            }
            .section-title {
                font-size: 2rem;
            }
            .subscription-info-card {
                min-height: 140px;
                padding: 20px;
            }
            .language-card {
                height: 70px;
                padding: 12px 20px;
            }
        }

        @media (max-width: 360px) {
            .balance-flask {
                flex-direction: column;
                align-items: flex-end;
                gap: 4px;
            }
            .subscription-info-card {
                min-height: 90px;
                padding: 8px;
            }
            .language-card {
                height: 45px;
                padding: 6px 8px;
            }
            .subscription-card {
                max-width: 280px;
                padding: 8px 12px;
            }
            .subscription-card .card-title {
                font-size: 13px;
            }
            .subscription-card .card-price {
                font-size: 12px;
            }
            .subscription-card .checkmark {
                width: 14px;
                height: 14px;
                right: 8px;
            }
            .header-container {
                padding: 8px 12px;
            }
            .category-buttons {
                bottom: 8px;
                padding: 4px 10px;
                gap: 10px;
            }
            .category-button {
                width: 36px;
                height: 36px;
            }
        }

        @keyframes slideIn {
            from { transform: translateX(-20px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideSection {
            from { transform: translateY(10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes slideLeft {
            from { transform: translateX(-15px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes slideRight {
            from { transform: translateX(15px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        @keyframes neonFlicker {
            0%, 100% { text-shadow: 0 0 5px rgba(255, 255, 255, 0.5); }
            50% { text-shadow: 0 0 8px rgba(255, 255, 255, 0.6); }
        }

        .category-buttons {
            position: fixed;
            bottom: 16px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            justify-content: center;
            gap: 16px;
            z-index: 10;
            background: rgba(16, 16, 16, 0.85);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 24px;
            padding: 8px 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .category-button {
            background-color: transparent;
            border-radius: 50%;
            padding: 0;
            font-family: 'Inter', sans-serif;
            font-size: 16px;
            border: none;
            color: #ffffff;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            box-shadow: none;
        }

        .category-button:hover {
            transform: translateY(-1px);
            background-color: rgba(108, 93, 211, 0.1);
        }

        .category-button.selected {
            background-color: #6C5DD3;
            box-shadow: 0 2px 8px rgba(108, 93, 211, 0.3);
        }
    </style>
</head>
<body class="flex flex-col items-center p-2">
    <div class="header-container">
        <div id="sectionTitle" class="section-title"></div>
        <div class="balance-flask">
            <div class="balance-item">
                <svg class="icon" viewBox="0 0 24 24">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                </svg>
                <span id="photoLimitDisplay">5 / 10</span>
            </div>
            <div class="balance-item">
                <span id="tokenCount"></span>
                <span class="ice-icon">🧊</span>
            </div>
            <button class="plus-btn" onclick="showCurrencySection()">
                <svg class="icon" viewBox="0 0 24 24">
                    <line x1="12" y1="5" x2="12" y2="19"></line>
                    <line x1="5" y1="12" x2="19" y2="12"></line>
                </svg>
            </button>
        </div>
    </div>

    <div class="category-buttons">
        <button id="storeBtn" class="category-button selected" onclick="showSection('storeSection')">
            <svg class="icon" viewBox="0 0 24 24">
                <circle cx="9" cy="21" r="1"></circle>
                <circle cx="20" cy="21" r="1"></circle>
                <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
            </svg>
        </button>
        <button id="subscriptionsBtn" class="category-button" onclick="showSection('subscriptionsSection')">
            <svg class="icon" viewBox="0 0 24 24">
                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
            </svg>
        </button>
        <button id="settingsBtn" class="category-button" onclick="showSection('settingsSection')">
            <svg class="icon" viewBox="0 0 24 24">
                <circle cx="12" cy="12" r="3"></circle>
                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
            </svg>
        </button>
    </div>

    <div id="mainContent" class="content-section">
        <div id="storeSection">
            <div class="tab-container">
                <button id="scenariosTab" class="tab-button active" onclick="showStoreTab('scenarios')">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                    </svg>
                    Adventures
                </button>
                <button id="itemsTab" class="tab-button" onclick="showStoreTab('items')">
                    <svg class="icon" viewBox="0 0 24 24">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                        <line x1="12" y1="22.08" x2="12" y2="12"></line>
                    </svg>
                    Gear
                </button>
            </div>
            <div id="scenariosContent" class="store-content">
                <div class="grid grid-cols-4 gap-3">
                    <div class="card">
                        <img src="" alt="Scenario 1" id="scenario1Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario1Title"></div>
                            <div class="card-desc" id="scenario1Desc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="selectScenario(1)">
                                    <span>🧊</span> <span id="scenario1Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="" alt="Scenario 2" id="scenario2Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario2Title"></div>
                            <div class="card-desc" id="scenario2Desc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="selectScenario(2)">
                                    <span>🧊</span> <span id="scenario2Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="" alt="Scenario 3" id="scenario3Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario3Title"></div>
                            <div class="card-desc" id="scenario3Desc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="selectScenario(3)">
                                    <span>🧊</span> <span id="scenario3Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="" alt="Scenario 4" id="scenario4Image">
                        <div class="card-body">
                            <div class="card-title" id="scenario4Title"></div>
                            <div class="card-desc" id="scenario4Desc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="selectScenario(4)">
                                    <span>🧊</span> <span id="scenario4Btn"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div id="itemsContent" class="store-content hidden">
                <div class="grid grid-cols-4 gap-3 mt-4">
                    <div class="card">
                        <img src="" alt="Map" id="mapImage">
                        <div class="card-body">
                            <div class="card-title" id="map"></div>
                            <div class="card-desc" id="mapDesc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="buyItem('map', PRICES.items.map.fires)">
                                    <span id="buyBtnMap"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="" alt="Compass" id="compassImage">
                        <div class="card-body">
                            <div class="card-title" id="compass"></div>
                            <div class="card-desc" id="compassDesc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="buyItem('compass', PRICES.items.compass.fires)">
                                    <span id="buyBtnCompass"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="" alt="Backpack" id="backpackImage">
                        <div class="card-body">
                            <div class="card-title" id="backpack"></div>
                            <div class="card-desc" id="backpackDesc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="buyItem('backpack', PRICES.items.backpack.fires)">
                                    <span id="buyBtnBackpack"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <img src="" alt="Torch" id="torchImage">
                        <div class="card-body">
                            <div class="card-title" id="torch"></div>
                            <div class="card-desc" id="torchDesc"></div>
                            <div class="card-actions">
                                <button class="btn" onclick="buyItem('torch', PRICES.items.torch.fires)">
                                    <span id="buyBtnTorch"></span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="subscriptionsSection" class="hidden">
            <div id="subscriptionDetails" class="subscription-details">
                <h3 id="detailsHeader" class="details-header"></h3>
                <div id="subscriptionsDesc" class="details-content"></div>
            </div>
            <div class="mt-3">
                <div class="subscription-card" onclick="selectPlan(1)">
                    <div class="card-body">
                        <div class="card-title" id="sub1Day"></div>
                        <div class="card-price">$2.00</div>
                        <div class="checkmark">✔</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(2)">
                    <div class="card-body">
                        <div class="card-title" id="sub3Days"></div>
                        <div class="card-price">$5.00</div>
                        <div class="checkmark">✔</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(3)">
                    <div class="card-body">
                        <div class="card-title" id="sub1Week"></div>
                        <div class="card-price">$13.00</div>
                        <div class="checkmark">✔</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(4)">
                    <div class="card-body">
                        <div class="card-title" id="sub1Month"></div>
                        <div class="card-price">$25.00</div>
                        <div class="checkmark">✔</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(5)">
                    <div class="card-body">
                        <div class="card-title" id="sub3Months"></div>
                        <div class="card-price">$70.00</div>
                        <div class="checkmark">✔</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(6)">
                    <div class="card-body">
                        <div class="card-title" id="subForever"></div>
                        <div class="card-price">$50.00</div>
                        <div class="checkmark">✔</div>
                    </div>
                </div>
                <div class="subscription-card" onclick="selectPlan(7)">
                    <div class="card-body">
                        <div class="card-title" id="subDeluxe"></div>
                        <div class="card-price">$100.00</div>
                        <div class="checkmark">✔</div>
                    </div>
                </div>
                <div class="card-actions">
                    <button id="buySubscriptionBtn" class="btn" onclick="buySelectedSubscription()">
                        <span id="buyBtnText"></span>
                    </button>
                </div>
            </div>
        </div>

        <div id="currencySection" class="hidden">
            <div class="grid grid-cols-2 gap-3 mt-4">
                <div class="card col-span-2">
                    <img src="" alt="More Photos" id="morePhotosImage">
                    <div class="card-body">
                        <div class="card-title" id="morePhotos"></div>
                        <div class="card-desc" id="morePhotosDesc"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="showSection('subscriptionsSection')">
                                <span id="buyBtnMorePhotos"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <img src="" alt="Small Pack" id="smallPackImage">
                    <div class="card-body">
                        <div class="card-title" id="smallPack"></div>
                        <div class="card-desc" id="smallPackDesc"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(100, PRICES.currency.smallPack)">
                                <span id="buyBtnSmallPack"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <img src="" alt="Medium Pack" id="mediumPackImage">
                    <div class="card-body">
                        <div class="card-title" id="mediumPack"></div>
                        <div class="card-desc" id="mediumPackDesc"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(200, PRICES.currency.mediumPack)">
                                <span id="buyBtnMediumPack"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <img src="" alt="Large Pack" id="largePackImage">
                    <div class="card-body">
                        <div class="card-title" id="largePack"></div>
                        <div class="card-desc" id="largePackDesc"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(500, PRICES.currency.largePack)">
                                <span id="buyBtnLargePack"></span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card">
                    <img src="" alt="Mega Pack" id="megaPackImage">
                    <div class="card-body">
                        <div class="card-title" id="megaPack"></div>
                        <div class="card-desc" id="megaPackDesc"></div>
                        <div class="card-actions">
                            <button class="btn" onclick="buyTokens(1000, PRICES.currency.megaPack)">
                                <span id="buyBtnMegaPack"></span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="settingsSection" class="hidden">
            <div class="card subscription-info-card" onclick="showSubscriptionSection()">
                <div class="card-body">
                    <div class="card-title" id="settingsTitle"></div>
                    <div class="card-desc" id="subscriptionInfo"></div>
                    <div class="card-actions">
                        <button id="renewBtn" class="btn hidden" onclick="showSection('subscriptionsSection')">
                            <span id="renewBtnText"></span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="card language-card" onclick="toggleLanguage()">
                <div class="card-body">
                    <div class="card-title" id="languageLabel"></div>
                    <div class="card-desc" id="currentLanguage"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal fixed inset-0 flex items-center justify-center hidden">
        <div class="confirm-modal-content">
            <h3 id="confirmTitle" class="confirm-title"></h3>
            <p id="confirmText" class="confirm-text mt-2"></p>
            <div class="confirm-buttons">
                <button id="confirmBtn" class="btn">Confirm</button>
                <button id="cancelBtn" class="btn">Cancel</button>
            </div>
        </div>
    </div>

    <script>
        const LANGUAGES = {
            en: { flag: '🇺🇸', name: 'English' },
            ru: { flag: '🇷🇺', name: 'Русский' }
        };

        const translations = {
            en: {
                sectionTitleStore: 'Store',
                sectionTitleSubscriptions: 'Subscriptions',
                sectionTitleCurrency: 'Currency',
                sectionTitleSettings: 'Settings',
                scenariosTab: 'Scenarios',
                itemsTab: 'Items',
                tokenCount: '100',
                languageLabel: 'Language',
                settingsTitle: 'Your Plan',
                subscriptionInfo: 'Deluxe until May 18, 2025',
                renewBtnText: 'Renew',
                scenario1Title: 'Tutor Asleep',
                scenario1Desc: 'You enter her home, door ajar, finding her naked and dreaming of you. Wake her with a sinful touch! ❄️',
                scenario1Btn: 'Buy for 100🧊',
                scenario2Title: 'Teacher After School',
                scenario2Desc: 'Alone with her to fix grades, her tight skirt teases as she bends over. ❄️',
                scenario2Btn: 'Buy for 100🧊',
                scenario3Title: 'Policewoman Stop',
                scenario3Desc: 'She pulls you over in the wild, no license—her smirk promises a naughty punishment! ❄️',
                scenario3Btn: 'Buy for 100🧊',
                scenario4Title: 'Helping Friend',
                scenario4Desc: 'Her computer\'s stuck, and her shy glances turn into wild invites as you lean in. ❄️',
                scenario4Btn: 'Buy for 100🧊',
                detailsHeader: 'Premium Benefits',
                subscriptionsDescStandard: '<p><strong>Premium Benefits 🧊✨</strong></p><p>New Limit: 50 photos/day + Unlimited Chat! 💬❄️</p><p>Better Outfits 🌟</p><p>Faster Responses ⚡</p><p>Enhanced Image Quality 🎨</p><p>Priority Scenario Access 🚀</p>',
                subscriptionsDescDeluxe: '<p><strong>Premium Benefits 🧊✨</strong></p><p>New Limit: Unlimited photos + Unlimited Chat! 💬❄️</p><p>Better Outfits 🌟</p><p>Faster Responses ⚡</p><p>Enhanced Image Quality 🎨</p><p>Priority Scenario Access 🚀</p>',
                sub1Day: '1 Day Pass',
                sub3Days: '3 Days Pass',
                sub1Week: '1 Week Pass',
                sub1Month: '1 Month Pass',
                sub3Months: '3 Months Pass',
                subForever: 'Forever Pass',
                subDeluxe: 'Deluxe Pass',
                buyBtnText: 'Buy Subscription',
                morePhotos: 'Want More Photos?',
                morePhotosDesc: 'Unlock more photo limits!',
                buyBtnMorePhotos: 'Check Subscriptions',
                smallPack: 'Small Pack',
                smallPackDesc: '100 🧊',
                buyBtnSmallPack: 'Buy for $1.00',
                mediumPack: 'Medium Pack',
                mediumPackDesc: '200 🧊',
                buyBtnMediumPack: 'Buy for $1.50',
                largePack: 'Large Pack',
                largePackDesc: '500 🧊',
                buyBtnLargePack: 'Buy for $3.00',
                megaPack: 'Mega Pack',
                megaPackDesc: '1000 🧊',
                buyBtnMegaPack: 'Buy for $5.00',
                map: 'Map',
                mapDesc: 'A detailed map for your adventure. 🗺️',
                buyBtnMap: 'Buy for 50🧊',
                compass: 'Compass',
                compassDesc: 'A reliable compass for navigation. 🧭',
                buyBtnCompass: 'Buy for 50🧊',
                backpack: 'Backpack',
                backpackDesc: 'A durable backpack for your belongings. 🎒',
                buyBtnBackpack: 'Buy for 50🧊',
                torch: 'Torch',
                torchDesc: 'A powerful torch for lighting up the dark. 🔦',
                buyBtnTorch: 'Buy for 50🧊',
                confirmTitle: 'Confirm Purchase',
                confirmText: 'Are you sure you want to proceed?',
                cancelText: 'Cancel'
            },
            ru: {
                sectionTitleStore: 'Магазин',
                sectionTitleSubscriptions: 'Подписки',
                sectionTitleCurrency: 'Валюта',
                sectionTitleSettings: 'Настройки',
                scenariosTab: 'Сценарии',
                itemsTab: 'Предметы',
                tokenCount: '100',
                languageLabel: 'Язык',
                settingsTitle: 'Ваш план',
                subscriptionInfo: 'Делюкс до 18 мая 2025 г.',
                renewBtnText: 'Продлить',
                scenario1Title: 'Репетитор спит',
                scenario1Desc: 'Ты заходишь в её дом, дверь приоткрыта, она голая и мечтает о тебе. Разбуди её грешным касанием! ❄️',
                scenario1Btn: 'Купить за 100🧊',
                scenario2Title: 'Учительница после уроков',
                scenario2Desc: 'Наедине с ней, чтобы исправить оценки, её обтягивающая юбка дразнит, когда она наклоняется. ❄️',
                scenario2Btn: 'Купить за 100🧊',
                scenario3Title: 'Остановка полицейской',
                scenario3Desc: 'Она останавливает тебя в глуши, без прав — её ухмылка обещает пикантное наказание! ❄️',
                scenario3Btn: 'Купить за 100🧊',
                scenario4Title: 'Помощь подруге',
                scenario4Desc: 'Её компьютер завис, а робкие взгляды превращаются в дерзкие приглашения, когда ты наклоняешься. ❄️',
                scenario4Btn: 'Купить за 100🧊',
                detailsHeader: 'Преимущества премиума',
                subscriptionsDescStandard: '<p><strong>Преимущества премиума 🧊✨</strong></p><p>Новый лимит: 50 фото/день + Безлимитный чат! 💬❄️</p><p>Лучшая одежда 🌟</p><p>Быстрые ответы ⚡</p><p>Улучшенное качество изображений 🎨</p><p>Приоритетный доступ к сценариям 🚀</p>',
                subscriptionsDescDeluxe: '<p><strong>Преимущества премиума 🧊✨</strong></p><p>Новый лимит: Безлимит фото + Безлимитный чат! 💬❄️</p><p>Лучшая одежда 🌟</p><p>Быстрые ответы ⚡</p><p>Улучшенное качество изображений 🎨</p><p>Приоритетный доступ к сценариям 🚀</p>',
                sub1Day: 'Пропуск на 1 день',
                sub3Days: 'Пропуск на 3 дня',
                sub1Week: 'Пропуск на 1 неделю',
                sub1Month: 'Пропуск на 1 месяц',
                sub3Months: 'Пропуск на 3 месяца',
                subForever: 'Вечный пропуск',
                subDeluxe: 'Делюкс пропуск',
                buyBtnText: 'Купить подписку',
                morePhotos: 'Хотите больше фото?',
                morePhotosDesc: 'Разблокируйте больше лимитов на фото!',
                buyBtnMorePhotos: 'Посмотреть подписки',
                smallPack: 'Малый набор',
                smallPackDesc: '100 🧊',
                buyBtnSmallPack: 'Купить за $1.00',
                mediumPack: 'Средний набор',
                mediumPackDesc: '200 🧊',
                buyBtnMediumPack: 'Купить за $1.50',
                largePack: 'Большой набор',
                largePackDesc: '500 🧊',
                buyBtnLargePack: 'Купить за $3.00',
                megaPack: 'Мега набор',
                megaPackDesc: '1000 🧊',
                buyBtnMegaPack: 'Купить за $5.00',
                map: 'Карта',
                mapDesc: 'Детальная карта для вашего приключения. 🗺️',
                buyBtnMap: 'Купить за 50🧊',
                compass: 'Компас',
                compassDesc: 'Надежный компас для навигации. 🧭',
                buyBtnCompass: 'Купить за 50🧊',
                backpack: 'Рюкзак',
                backpackDesc: 'Прочный рюкзак для ваших вещей. 🎒',
                buyBtnBackpack: 'Купить за 50🧊',
                torch: 'Фонарик',
                torchDesc: 'Мощный фонарик для освещения в темноте. 🔦',
                buyBtnTorch: 'Купить за 50🧊',
                confirmTitle: 'Подтверждение покупки',
                confirmText: 'Вы уверены, что хотите продолжить?',
                cancelText: 'Отмена'
            }
        };

        let currentLanguage = 'ru';
        let currentSection = 'storeSection';
        let currentStoreTab = 'scenarios';
        let selectedPlan = null;
        let userTokens = 100;
        let photoLimit = { current: 5, max: 10 };
        const subscription = {
            plan: 'Deluxe',
            expirationDate: new Date('2025-05-18T15:17:00+05:00')
        };
        const currentDate = new Date('2025-05-30T15:52:00+05:00');

        function toggleLanguage() {
            const langKeys = Object.keys(LANGUAGES);
            const currentIndex = langKeys.indexOf(currentLanguage);
            currentLanguage = langKeys[(currentIndex + 1) % langKeys.length];
            updateLanguage();
            updateUI();
        }

        function showSubscriptionSection() {
            showSection('subscriptionsSection');
        }

        function updateLanguage() {
            const lang = LANGUAGES[currentLanguage];
            const trans = translations[currentLanguage] || translations.en;
            document.getElementById('currentLanguage').textContent = lang.name;
            document.getElementById('languageLabel').textContent = trans.languageLabel || 'Language';
            document.getElementById('tokenCount').textContent = userTokens;
            document.getElementById('settingsTitle').textContent = trans.settingsTitle || 'Your Plan';
            const planName = currentLanguage === 'ru' ? 'Делюкс' : 'Deluxe';
            document.getElementById('subscriptionInfo').textContent = `${planName} ${trans.subscriptionInfo.split(' ').slice(1).join(' ')}`;
            document.getElementById('renewBtnText').textContent = trans.renewBtnText || 'Renew';

            const timeDiff = subscription.expirationDate - currentDate;
            const daysLeft = timeDiff / (1000 * 60 * 60 * 24);
            if (daysLeft <= 3) {
                document.getElementById('renewBtn').classList.remove('hidden');
            } else {
                document.getElementById('renewBtn').classList.add('hidden');
            }

            updateSectionContent(trans);
        }

        function updateSectionContent(trans) {
            const sectionTitles = {
                storeSection: trans.sectionTitleStore,
                subscriptionsSection: trans.sectionTitleSubscriptions,
                currencySection: trans.sectionTitleCurrency,
                settingsSection: trans.sectionTitleSettings
            };
            document.getElementById('sectionTitle').textContent = sectionTitles[currentSection] || 'Section';

            document.getElementById('scenariosTab').textContent = `📖 ${trans.scenariosTab}`;
            document.getElementById('itemsTab').textContent = `🛍️ ${trans.itemsTab}`;

            if (currentSection === 'storeSection') {
                if (currentStoreTab === 'scenarios') {
                    for (let i = 1; i <= 4; i++) {
                        document.getElementById(`scenario${i}Title`).textContent = trans[`scenario${i}Title`] || `Scenario ${i}`;
                        document.getElementById(`scenario${i}Desc`).textContent = trans[`scenario${i}Desc`] || 'Description';
                        document.getElementById(`scenario${i}Btn`).textContent = trans[`scenario${i}Btn`] || 'Buy';
                    }
                } else if (currentStoreTab === 'items') {
                    document.getElementById('map').textContent = trans.map || 'Map';
                    document.getElementById('mapDesc').textContent = trans.mapDesc || 'Description';
                    document.getElementById('buyBtnMap').textContent = trans.buyBtnMap || 'Buy';
                    document.getElementById('compass').textContent = trans.compass || 'Compass';
                    document.getElementById('compassDesc').textContent = trans.compassDesc || 'Description';
                    document.getElementById('buyBtnCompass').textContent = trans.buyBtnCompass || 'Buy';
                    document.getElementById('backpack').textContent = trans.backpack || 'Backpack';
                    document.getElementById('backpackDesc').textContent = trans.backpackDesc || 'Description';
                    document.getElementById('buyBtnBackpack').textContent = trans.buyBtnBackpack || 'Buy';
                    document.getElementById('torch').textContent = trans.torch || 'Torch';
                    document.getElementById('torchDesc').textContent = trans.torchDesc || 'Description';
                    document.getElementById('buyBtnTorch').textContent = trans.buyBtnTorch || 'Buy';
                }
            } else if (currentSection === 'subscriptionsSection') {
                document.getElementById('detailsHeader').textContent = trans.detailsHeader || 'Subscription Benefits';
                document.getElementById('subscriptionsDesc').innerHTML = selectedPlan === 7 ? trans.subscriptionsDescDeluxe : trans.subscriptionsDescStandard;
                document.getElementById('sub1Day').textContent = trans.sub1Day || '1 Day Pass';
                document.getElementById('sub3Days').textContent = trans.sub3Days || '3 Days Pass';
                document.getElementById('sub1Week').textContent = trans.sub1Week || '1 Week Pass';
                document.getElementById('sub1Month').textContent = trans.sub1Month || '1 Month Pass';
                document.getElementById('sub3Months').textContent = trans.sub3Months || '3 Months Pass';
                document.getElementById('subForever').textContent = trans.subForever || 'Forever Pass';
                document.getElementById('subDeluxe').textContent = trans.subDeluxe || 'Deluxe Pass';
                document.getElementById('buyBtnText').textContent = trans.buyBtnText || 'Buy Subscription';
            } else if (currentSection === 'currencySection') {
                document.getElementById('morePhotos').textContent = trans.morePhotos || 'Want More Photos?';
                document.getElementById('morePhotosDesc').textContent = trans.morePhotosDesc || 'Unlock more photo limits!';
                document.getElementById('buyBtnMorePhotos').textContent = trans.buyBtnMorePhotos || 'Check Subscriptions';
                document.getElementById('smallPack').textContent = trans.smallPack || 'Small Pack';
                document.getElementById('smallPackDesc').textContent = trans.smallPackDesc || '100 🧊';
                document.getElementById('buyBtnSmallPack').textContent = trans.buyBtnSmallPack || 'Buy';
                document.getElementById('mediumPack').textContent = trans.mediumPack || 'Medium Pack';
                document.getElementById('mediumPackDesc').textContent = trans.mediumPackDesc || '200 🧊';
                document.getElementById('buyBtnMediumPack').textContent = trans.buyBtnMediumPack || 'Buy';
                document.getElementById('largePack').textContent = trans.largePack || 'Large Pack';
                document.getElementById('largePackDesc').textContent = trans.largePackDesc || '500 🧊';
                document.getElementById('buyBtnLargePack').textContent = trans.buyBtnLargePack || 'Buy';
                document.getElementById('megaPack').textContent = trans.megaPack || 'Mega Pack';
                document.getElementById('megaPackDesc').textContent = trans.megaPackDesc || '1000 🧊';
                document.getElementById('buyBtnMegaPack').textContent = trans.buyBtnMegaPack || 'Buy';
            }
        }

        function showSection(sectionId) {
            document.querySelectorAll('#mainContent > div').forEach(div => {
                div.classList.add('hidden');
            });
            document.getElementById(sectionId).classList.remove('hidden');
            currentSection = sectionId;

            document.querySelectorAll('.category-button').forEach(btn => {
                btn.classList.remove('selected');
            });
            const buttonMap = {
                'storeSection': 'storeBtn',
                'subscriptionsSection': 'subscriptionsBtn',
                'settingsSection': 'settingsBtn',
                'currencySection': 'storeBtn'
            };
            const buttonId = buttonMap[sectionId];
            if (buttonId) {
                document.getElementById(buttonId).classList.add('selected');
            }

            updateLanguage();
            updateUI();
        }

        function showStoreTab(tab) {
            currentStoreTab = tab;
            document.querySelectorAll('.store-content').forEach(content => {
                content.classList.add('hidden');
            });
            document.getElementById(`${tab}Content`).classList.remove('hidden');

            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(`${tab}Tab`).classList.add('active');

            updateLanguage();
            updateUI();
        }

        function showCurrencySection() {
            showSection('currencySection');
        }

        function selectScenario(id) {
            const cards = document.querySelectorAll('#scenariosContent .card');
            cards.forEach(card => card.classList.remove('selected'));
            cards[id - 1].classList.add('selected');
            showConfirmModal(`Purchase ${translations[currentLanguage][`scenario${id}Title`]} for ${PRICES.scenarios[`scenario${id}`].ice}🧊?`, () => {
                if (userTokens >= PRICES.scenarios[`scenario${id}`].ice) {
                    userTokens -= PRICES.scenarios[`scenario${id}`].ice;
                    updateUI();
                    alert(`${translations[currentLanguage][`scenario${id}Title`]} purchased!`);
                } else {
                    alert('Not enough ice cubes!');
                }
            });
        }

        function selectPlan(id) {
            const cards = document.querySelectorAll('#subscriptionsSection .subscription-card');
            cards.forEach(card => card.classList.remove('selected'));
            cards[id - 1].classList.add('selected');
            selectedPlan = id;
            const trans = translations[currentLanguage] || translations.en;
            document.getElementById('subscriptionsDesc').innerHTML = id === 7 ? trans.subscriptionsDescDeluxe : trans.subscriptionsDescStandard;
        }

        function buySelectedSubscription() {
            if (!selectedPlan) {
                alert('Please select a subscription plan!');
                return;
            }
            const planKeys = ['sub1Day', 'sub3Days', 'sub1Week', 'sub1Month', 'sub3Months', 'subForever', 'subDeluxe'];
            const plan = planKeys[selectedPlan - 1];
            showConfirmModal(`Purchase ${translations[currentLanguage][plan]} for $${PRICES.subscriptions[plan].price}?`, () => {
                alert(`${translations[currentLanguage][plan]} purchased!`);
                photoLimit = plan === 'subDeluxe' ? { current: 0, max: Infinity } : { current: 0, max: 50 };
                subscription.plan = plan === 'subDeluxe' ? 'Deluxe' : 'Standard';
                subscription.expirationDate = new Date(currentDate.getTime() + (plan === 'sub1Day' ? 1 : plan === 'sub3Days' ? 3 : plan === 'sub1Week' ? 7 : plan === 'sub1Month' ? 30 : plan === 'sub3Months' ? 90 : 365) * 24 * 60 * 60 * 1000);
                updateUI();
                updateLanguage();
            });
        }

        function buyTokens(amount, price) {
            showConfirmModal(`Purchase ${amount}🧊 for $${price.price}?`, () => {
                userTokens += amount;
                updateUI();
                alert(`${amount}🧊 purchased!`);
            });
        }

        function buyItem(item, ice) {
            showConfirmModal(`Purchase ${translations[currentLanguage][item]} for ${ice}🧊?`, () => {
                if (userTokens >= ice) {
                    userTokens -= ice;
                    updateUI();
                    alert(`${translations[currentLanguage][item]} purchased!`);
                } else {
                    alert('Not enough ice cubes!');
                }
            });
        }

        function showConfirmModal(message, onConfirm) {
            const modal = document.getElementById('confirmModal');
            document.getElementById('confirmTitle').textContent = translations[currentLanguage].confirmTitle || 'Confirm Purchase';
            document.getElementById('confirmText').textContent = message;
            modal.classList.remove('hidden');

            const confirmBtn = document.getElementById('confirmBtn');
            const cancelBtn = document.getElementById('cancelBtn');
            const newConfirm = () => {
                onConfirm();
                modal.classList.add('hidden');
                confirmBtn.removeEventListener('click', newConfirm);
            };
            const newCancel = () => {
                modal.classList.add('hidden');
                cancelBtn.removeEventListener('click', newCancel);
            };

            confirmBtn.textContent = translations[currentLanguage].confirmTitle || 'Confirm';
            cancelBtn.textContent = translations[currentLanguage].cancelText || 'Cancel';
            confirmBtn.addEventListener('click', newConfirm);
            cancelBtn.addEventListener('click', newCancel);
        }

        function updateUI() {
            document.getElementById('tokenCount').textContent = userTokens;
            document.getElementById('photoLimitDisplay').textContent = `${photoLimit.current} / ${photoLimit.max === Infinity ? '∞' : photoLimit.max}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            updateLanguage();
            showSection('storeSection');
            showStoreTab('scenarios');
            updateUI();

            document.getElementById('storeBtn').addEventListener('click', () => showSection('storeSection'));
            document.getElementById('subscriptionsBtn').addEventListener('click', () => showSection('subscriptionsSection'));
            document.getElementById('settingsBtn').addEventListener('click', () => showSection('settingsSection'));

            document.getElementById('scenariosTab').addEventListener('click', () => showStoreTab('scenarios'));
            document.getElementById('itemsTab').addEventListener('click', () => showStoreTab('items'));

            document.querySelectorAll('#scenariosContent .card img').forEach((el, index) => {
                el.src = IMAGES.scenarios[`scenario${index + 1}`];
            });
            document.querySelectorAll('#itemsContent .card img').forEach((el, index) => {
                const itemKeys = Object.keys(IMAGES.items);
                el.src = IMAGES.items[itemKeys[index]];
            });
            document.querySelectorAll('#currencySection .card img').forEach((el, index) => {
                const currencyKeys = Object.keys(IMAGES.currency);
                el.src = IMAGES.currency[currencyKeys[index]];
            });
        });

        const IMAGES = {
            scenarios: {
                scenario1: 'URL_SCENARIO_1',
                scenario2: 'URL_SCENARIO_2',
                scenario3: 'URL_SCENARIO_3',
                scenario4: 'URL_SCENARIO_4'
            },
            items: {
                map: 'URL_MAP',
                compass: 'URL_COMPASS',
                backpack: 'URL_BACKPACK',
                torch: 'URL_TORCH'
            },
            currency: {
                morePhotos: 'URL_MORE_PHOTOS',
                smallPack: 'URL_SMALL_PACK',
                mediumPack: 'URL_MEDIUM_PACK',
                largePack: 'URL_LARGE_PACK',
                megaPack: 'URL_MEGA_PACK'
            }
        };

        const PRICES = {
            scenarios: {
                scenario1: { ice: 100 },
                scenario2: { ice: 100 },
                scenario3: { ice: 100 },
                scenario4: { ice: 100 }
            },
            subscriptions: {
                sub1Day: { price: 2.00 },
                sub3Days: { price: 5.00 },
                sub1Week: { price: 13.00 },
                sub1Month: { price: 25.00 },
                sub3Months: { price: 70.00 },
                subForever: { price: 50.00 },
                subDeluxe: { price: 100.00 }
            },
            currency: {
                smallPack: { ice: 100, price: 1.00 },
                mediumPack: { ice: 200, price: 1.50 },
                largePack: { ice: 500, price: 3.00 },
                megaPack: { ice: 1000, price: 5.00 }
            },
            items: {
                map: { ice: 50 },
                compass: { ice: 50 },
                backpack: { ice: 50 },
                torch: { ice: 50 }
            }
        };
    </script>
</body>
</html>
